<div class="container-fluid mt-4">
  <h4 class="mb-3">MNO Approval List</h4>

  <div class="table-responsive" style="overflow-x: auto;">
    <table class="table table-bordered table-striped align-middle text-center w-100" style="min-width: 1300px;">
      <thead class="table-dark">
        <tr>
          <th>S.No.</th>
          <th>Artist</th>
          <th>Album</th>
          <th>Song</th>
          <th>Code</th>
          <th>QR</th>
          <th>Genre</th>
          <th>CP</th>
          <th>Country</th>
          <th>MNO</th>
          <th>Contract</th>
          <th>Expiry</th>
          <th>Audio</th>
          <th >Approve</th>
          <th>Rejection Reason</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let song of approvals; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ song.artist }}</td>
          <td>{{ song.album }}</td>
          <td>{{ song.songName }}</td>
          <td>{{ song.songCode }}</td>
          <td>
            <a [href]="song.qrUrl" target="_blank">
              <img [src]="'https://api.qrserver.com/v1/create-qr-code/?data=' + song.qrUrl + '&size=60x60'" alt="QR Code" />
            </a>
          </td>
          <td>{{ song.genre }}</td>
          <td>{{ song.cp }}</td>
          <td>{{ song.country }}</td>
          <td>{{ song.mno }}</td>
          <td>
            <a *ngIf="song.contractFileUrl" [href]="song.contractFileUrl" download>Download</a>
          </td>
          <td>{{ song.expiryDate }}</td>
          <td>
            <audio *ngIf="song.audioFileUrl" [src]="song.audioFileUrl" controls preload="none" style="width: 100px;"></audio>
          </td>
          <td>
            <form [formGroup]="song.controls">
              <select class="form-select form-select-sm" formControlName="approved">
                <option [ngValue]=true>Approve</option>
                <option [ngValue]=false>Reject</option>
              </select>
              <!-- <button class="btn btn-sm btn-success mt-1" (click)="saveApproval(i)">Save</button> -->
            </form>
          </td>
          <td>
            <input
              type="text"
              class="form-control form-control-sm"
              [disabled]="song.controls.get('approved')?.value"
              [(ngModel)]="song.rejectionReason"
              placeholder="Reason if rejected" />
          </td>
          <td>
            <button class="btn btn-sm btn-success" (click)="saveApproval(i)">Save</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
