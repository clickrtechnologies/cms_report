<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="content-header">Content Upload - CP</h4>
    <button class="btn btn-info btn-custom" (click)="addContent()">
      <i class="bi bi-plus-circle"></i> Add Content
    </button>
  </div>

  <div class="table-responsive">
    <table class="table table-bordered table-hover text-center align-middle content-upload-table">
      <thead>
        <tr>
          <th>S.No</th>
          <th>Artist Name</th>
          <th>Album Name</th>
          <th>Song Name</th>
          <th>Genre/Cat</th>
          <th>Upload Date</th>
          <th>CP Name</th>
          <th>Country</th>
          <th>MNO</th>
          <th>Audio File</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let song of uploads; let i = index">
          <td>{{ i + 1 }}</td>
          <td><input type="text" class="form-control form-control-sm" [(ngModel)]="song.artistName" [readonly]="!song.isEditing" /></td>
          <td><input type="text" class="form-control form-control-sm" [(ngModel)]="song.albumName" [readonly]="!song.isEditing" /></td>
          <td><input type="text" class="form-control form-control-sm" [(ngModel)]="song.songName" [readonly]="!song.isEditing" /></td>
          <td><input type="text" class="form-control form-control-sm" [(ngModel)]="song.genre" [readonly]="!song.isEditing" /></td>
          <td>
  <input 
    type="date" 
    class="form-control form-control-sm" 
    [(ngModel)]="song.uploadDate" 
    [readonly]="!song.isEditing" 
  />
</td>

          <td><input type="text" class="form-control form-control-sm" [(ngModel)]="song.cpName" [readonly]="!song.isEditing" /></td>
          <td><input type="text" class="form-control form-control-sm" [(ngModel)]="song.country" [readonly]="!song.isEditing" /></td>
          <td><input type="text" class="form-control form-control-sm" [(ngModel)]="song.mno" [readonly]="!song.isEditing" /></td>
          <td>
            <div>
    <!-- File input for uploading -->
    <input type="file"
           accept="audio/*"
           class="form-control form-control-sm"
           (change)="onFileChange($event, i)"
           [disabled]="!song.isEditing" />

    <!-- Audio player (hidden unless there's a URL) -->
    <audio *ngIf="song.audioFileUrl"
           [id]="'audio-player-' + i"
           [src]="song.audioFileUrl">
    </audio>
  </div>  
          </td>
          <td>
            <div class="btn-group btn-group-sm" role="group">
              <button *ngIf="song.isEditing" class="btn btn-success btn-custom" (click)="saveContent(i)">
                <i class="bi bi-check-circle"></i> Save
              </button>
              <button *ngIf="!song.isEditing" class="btn btn-primary btn-custom" (click)="editContent(i)">
                <i class="bi bi-pencil-square"></i> Edit
              </button>
              <button class="btn btn-danger btn-custom" (click)="deleteContent(i)">
                <i class="bi bi-trash"></i> Delete
              </button>
              <button class="btn btn-secondary btn-custom" (click)="playAudio(i)">
                <i class="bi bi-play-circle"></i> Play
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>