<div class="container mt-4">
  <h4 class="mb-3">Contracts - CP</h4>

  <div class="table-responsive">
    <form [formGroup]="form">
      <table class="table table-bordered table-striped table-hover text-center align-middle">
        <thead class="table-dark">
          <tr>
            <th>Artist Name</th>
            <th>Album Name</th>
            <th>Song Name</th>
            <th>Gen/Cat</th>
            <th>CP Name</th>
            <th>Licensed Country</th>
            <th>Licensed MNO</th>
            <th>From Date</th>
            <th>To End Date</th>
            <th>Contract Expiry</th>
            <th>Upload Contract</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody formArrayName="contracts">
          <tr *ngFor="let contract of contracts.controls; let i = index" [formGroupName]="i">
            <td>{{ contract.get('artistName')?.value }}</td>
            <td>{{ contract.get('albumName')?.value }}</td>
            <td>{{ contract.get('songName')?.value }}</td>
            <td>{{ contract.get('genre')?.value }}</td>
            <td>{{ contract.get('cpName')?.value }}</td>
            <td>{{ contract.get('licensedCountry')?.value }}</td>
            <td>{{ contract.get('licensedMNO')?.value }}</td>

            <td><input type="date" formControlName="fromDate" class="form-control"></td>
            <td><input type="date" formControlName="toDate" class="form-control"></td>
            <td><input type="date" formControlName="expiryDate" class="form-control"></td>

            <td>
              <input type="file" (change)="onFileUpload($event, i)" class="form-control" />
              <span *ngIf="contract.get('contractFileUrl')?.value" class="text-success small mt-1 d-block">
                Uploaded
              </span>
            </td>

            <td>
              <button *ngIf="!isEditing[i]" class="btn btn-sm btn-primary" (click)="editContract(i)">Edit</button>
              <button *ngIf="isEditing[i]" class="btn btn-sm btn-success" (click)="saveContract(i)">Save</button>
            </td>
          </tr>
        </tbody>
      </table>
    </form>
  </div>
</div>
